# sub_step_types Enum

Internal mapping of Step class names to their step identifier strings. Used for workflow serialization and reconstruction.

## Description

The `sub_step_types` enum is dynamically generated by reading Step class files and extracting their static `step_name` property. This mapping is used internally by Micro Flow to:

- Serialize workflows to JSON with proper step type information
- Reconstruct step instances from serialized data
- Identify specialized step types without circular dependencies

## Structure

The enum is an object mapping class names to their step identifiers:

```javascript
{
  "Step": null,
  "ConditionalStep": "conditional",
  "LoopStep": "loop",
  "SwitchStep": "switch",
  "FlowControlStep": "flow_control",
  "SkipStep": "skip",
  "DelayStep": "delay",
  "Case": "case",
  // ... other step classes
}
```

## Import

```javascript
import SubStepTypes from 'micro-flow/enums/sub_step_types';
```

## Internal Usage

This enum is primarily for internal use by the Micro Flow library. It's automatically utilized during:

### Serialization

```javascript
// When serializing a workflow
const json = workflow.toJSON();
// Uses sub_step_types to include step class information
```

### Deserialization

```javascript
// When reconstructing a workflow from JSON
const workflow = Workflow.fromJSON(jsonData);
// Uses sub_step_types to instantiate correct step classes
```

## Step Name Mappings

| Class Name | step_name | Description |
|------------|-----------|-------------|
| `Step` | `null` | Base step class (no specialized type) |
| `LogicStep` | `null` | Base logic step class |
| `ConditionalStep` | `'conditional'` | Conditional branching |
| `LoopStep` | `'loop'` | Loop iteration |
| `SwitchStep` | `'switch'` | Multi-way branching |
| `FlowControlStep` | `'flow_control'` | Break/continue control |
| `SkipStep` | `'skip'` | Conditional skip |
| `DelayStep` | `'delay'` | Time-based delay |
| `Case` | `'case'` | Switch case statement |

## Implementation Details

The enum is generated at module load time by:

1. Reading all class files from the classes directory
2. Parsing each file to extract the class name and `step_name` property
3. Resolving enum references (e.g., `logic_step_types.CONDITIONAL`)
4. Building the mapping object

This approach avoids circular dependencies that would occur if Step classes were imported directly.

## Relationship to logic_step_types

`sub_step_types` includes all Step classes, while `logic_step_types` only defines the specialized logic step identifiers:

```javascript
// logic_step_types (user-facing)
{
  CONDITIONAL: 'conditional',
  LOOP: 'loop',
  FLOW_CONTROL: 'flow_control',
  SWITCH: 'switch',
  SKIP: 'skip'
}

// sub_step_types (internal)
{
  "Step": null,
  "LogicStep": null,
  "ConditionalStep": "conditional",  // Maps to logic_step_types.CONDITIONAL
  "LoopStep": "loop",                // Maps to logic_step_types.LOOP
  "FlowControlStep": "flow_control", // Maps to logic_step_types.FLOW_CONTROL
  "SwitchStep": "switch",            // Maps to logic_step_types.SWITCH
  "SkipStep": "skip",                // Maps to logic_step_types.SKIP
  "DelayStep": "delay",
  "Case": "case"
}
```

## User-Facing Alternative

For typical usage, prefer `logic_step_types` enum over `sub_step_types`:

```javascript
// Prefer this (user-facing)
import { LogicStepTypes } from 'micro-flow';
console.log(LogicStepTypes.CONDITIONAL); // 'conditional'

// Over this (internal)
import SubStepTypes from 'micro-flow/enums/sub_step_types';
console.log(SubStepTypes.ConditionalStep); // 'conditional'
```

## See Also

- [logic_step_types Enum](./logic-step-types.md) - User-facing logic step types
- [step_types Enum](./step-types.md) - High-level step categories
- [Step Class](../classes/step.md) - Base step class
- [LogicStep Class](../classes/logic-step.md) - Base logic step class
